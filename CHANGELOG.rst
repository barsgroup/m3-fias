История изменений
-----------------

1.1.0
+++++

- Поддержка Python 3.

1.0.5
+++++

- Исправление ошибки в функции ``get_house_name``. Ошибка возникала в тех
  случаях, когда у здания не было номера дома.

1.0.4
+++++

- Исправление ошибки, из-за которой не было возможности ввести адрес дома без
  номера (например, *Московская обл., г. Звенигород, мкр. Супонево, стр. 18*).

1.0.3
+++++

- Багфикс в JS-коде для поддержки старых версий браузеров.

1.0.2
+++++

- Прописаны константы-мнемоники, группирующие уровни адресных объектов,
  относящихся к населенным пунктам и улицам.

1.0.1
+++++

- Исправлена ошибка совместимости с Django 1.4 --- 1.5.

1.0.0
+++++

- UI-компонент ``ExtFiasAddrComponent`` разделен на контейнер полей
  (``m3_fias.ui.AddressFields``) и представления этих полей
  (``m3_fias.ui.RowsAddressView``, ``m3_fias.ui.ComactAddressView``). Контейнер
  содержит всю бизнес-логику работы полей, а отображение этих полей
  определяется в отдельных компонентах-представлениях, содержащих только
  JS-код, отвечающий за внешний вид панели ввода адреса.

- Контейнер адресных полей поддерживает новые возможности, в т.ч.:

  - копирование содержимого адресных полей из одного контейнера в другой;
  - сравнения содержимого двух контейнеров;
  - синхронизации одного контейнера с другим, когда при изменении адреса
    в полях одного контейнера данные копируются и в синхронизированные
    контейнеры.

- Добавлена поддержка поля *Строение*.

- Введен режим работы адресной панели *Только ФИАС*. В этом режиме возможен
  только поиск объектов (населенных пунктов, улиц и зданий) и их выбор из
  выпадающих списков, формируемых на основе данных ФИАС. Редактирование
  почтового индекса, номера корпуса и строения, полного адреса не доступно.

- В режиме *Только ФИАС* в поле *Дом* осуществляется выбор из всех имеющихся
  зданий указанной улицы или населенного пункта. Номера корпуса и строения
  (если есть) отображаются в выпадающем списке после выбора здания из
  выпадающего списка в поле *Дом*.

- Сортировка домов в выпадающем списке поля *Дом* выполняется по целочисленному
  значению номера. Т.е., дома будут идти в следующем порядке: *1, 5, 11, ...*,
  а не *1, 11, 5, ...*.

- Реализована корректировка раскладки клавиатуры при поиске объектов через
  поля ввода адресной панели, т.е. при вводе в поле *Населенный пункт* строки
  ``vjcrdf`` будет предложено выбрать адресный объект, содержащий в своём
  названии ``москва``.

- Вместо представлений django (views) для проксирования запросов к серверу
  `django-rest-fias <https://bitbucket.org/barsgroup/django-rest-fias>`_
  используются обработчики действий M3 (actions). При необходимости это
  позволит использовать средства M3 для расширения или переопределения
  обработчиков средствами M3.

- Удалена жесткая привязка к серверу `django-rest-fias <https://bitbucket.org/
  barsgroup/django-rest-fias>`_, работа с данными ФИАС осуществляется через
  т.н. бэкенды. В дальнейшем это позволит реализовывать поддержку
  альтернативных источников адресной информации ФИАС.

- Для `django-rest-fias <https://bitbucket.org/barsgroup/django-rest-fias>`_
  реализован бэкенд, поддерживающий работу в режиме кеширования запросов и без
  кеширования.

- Переработан низкоуровневый инструментарий для доступа к данным ФИАС
  (``m3_fias.utils``):

  - добавлены функции ``get_address_object`` и ``get_house``  для загрузки
    данных из ФИАС;
  - функции ``find_address_object`` и ``find_house`` для поиска в ФИАС по
    названию;
  - функции, формирующие текстовые представления для объектов ФИАС:
    ``get_address_object_name``, ``get_house_name`` и ``get_full_name``.

- Реализованы структуры данных для хранения объектов ФИАС, а также различные
  классы-адаптеры для более удобного использования объектов ФИАС в типовых
  ситуациях.

Версия обратно несовместима с 0.2.x, справочная информация по обновлению пакета
``m3-fias`` с версии 0.2.x до 1.0.x приведена в файле ``UPGRADE.rst``.

0.2.7
+++++

- Разрешено взаимодействие с сервером ФИАС через прокси.

0.2.6
+++++

- Исправлено регулярное выражение для валидации полного адреса.

0.2.5
+++++

- Добавлены валидация и ограничение макс. длины полей
  "Адрес", "Дом", "Квартира" и "Корпус"

0.2.4
+++++

- Исправлено кэширование ответов от сервера ФИАС. Исключено кэширование
  ответов, со статусом отличным от 200.
-

0.2.3
+++++

- Добавлена возможность запрета реадактирования полей полного адреса и
  индекcа ExtFiasAddrComponet.
- Изменен способ формирования urlpatterns для совместимости с Django 1.10.

0.2.2
+++++

- Добавлена возможность выбора доп. территории (90) в поле "Населенный пункт" 
  и улиц на доп. территориях (91) в поле "Улица".

0.2.1
+++++

- Изменения для совместимости с пакетами M3 с поддержкой Django 1.9+. Данная
  версия необходима при использовании objectpack>=2.2.3.

0.2.0.15
++++++++

- Добавлено кеширование результатов всех запросов к серверу ФИАС.

0.2.0.14
++++++++

- Добавлена очистка house_guid при вызове clearHouse. 

0.2.0.13
++++++++

- Исправлено отображение поля "нас.пункт" в IE11
- Возможность задать размер лейбла для индекса

0.2.0.12
++++++++

- Отлов ошибки со стороны ФиасСервера

0.2.0.11
++++++++

- Полный адрес выводится без проверки уровня нас. пункта

0.2.0.10
++++++++

- Добавлена возможность не указывать улицу в ExtFiasAddrComponent. При запросе
  домов теперь передается нас. пункт (улица может быть не заполнена).
- Согласованы по формату данные при рендеринге в форму и при запросе поиска.
- Добавлена очистка поля дома при изменении нас. пункта.

0.2.0.9
++++++++

- Исправлено отображение адреса для разного уровня объектов: для "регион",
  "автономный округ", "улица" и "объект, подчиненный дополнительной территории"
  в поле - только наименование объекта, для других - полный адрес.

0.2.0.8
++++++++

- Увеличена высота блока адреса, размеры полей (высота, отступы, разделители)
  задаются константами.
- Вывод полного наименования для всех уровней, кроме 'Регион' и 'Автономный
  округ', адресов.

0.2.0.7
++++++++

- Исправлена ошибка при подгрузке номера дома в случае, если не задана улица.
